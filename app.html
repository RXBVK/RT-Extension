<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Point Placing Editor</title>
    <link rel="stylesheet" href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css">
    <style>
        body {
            margin: 0;
        }

        #image-container {
            cursor: crosshair;
        }
    </style>
    <script src="https://unpkg.com/contentful-ui-extensions-sdk@3"></script>
</head>

<body>
    <input type="file" accept="image/png, image/jpeg" id="image-input">
    <div id="image-container">
    </div>
    <span>
        Left: <input type="text" id="coords-left" disabled></input></br>
        Top: <input type="text" id="coords-top" disabled></input>
    </span>
    <script>

        let imageContainer = document.getElementById("image-container");
        let coordsLeft = document.getElementById("coords-left");
        let coordsTop = document.getElementById("coords-top");
        let imageChoiceInput = document.getElementById("image-input");
        imageChoiceInput.addEventListener("input", showImage);

        function showImage() {
            if (imageChoiceInput.value.length > 0) {
                let chosenImage = imageChoiceInput.files[0].name;
                const src = chosenImage;
                let image = document.createElement("img");
                imageContainer.textContent = "";
                image.setAttribute("src", src);
                imageContainer.appendChild(image);
                image.addEventListener("click", setPointCoords);
            } else {
                imageContainer.textContent = "Choose an image";
                pointCoordinates.value = "";
            }
        }

        function setPointCoords(e) {
            let properH = `${Math.round(e.offsetX * 100 / e.target.width)}%`;
            let properV = `${Math.round(e.offsetY * 100 / e.target.height)}%`;
            coordsLeft.value = properH;
            coordsTop.value = properV;
        }

    </script>
</body>

</html>